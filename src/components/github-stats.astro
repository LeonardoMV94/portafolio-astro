---
interface Props {
  username: string;
  repoName: string;
}

const { username, repoName } = Astro.props;

// Try to fetch repository stats from GitHub API
let repoStats = null;
try {
  const response = await fetch(`https://api.github.com/repos/${username}/${repoName}`);
  if (response.ok) {
    repoStats = await response.json();
  }
} catch (error) {
  console.error('Error fetching GitHub stats:', error);
}
---

{repoStats && (
  <div class="bg-neutral-50 dark:bg-neutral-900 rounded-2xl p-6 border border-neutral-200 dark:border-neutral-800 mb-6">
    <h4 class="text-lg font-semibold text-neutral-900 dark:text-neutral-100 mb-4">
      Repository Stats
    </h4>
    <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
      <div class="text-center">
        <div class="text-2xl font-bold text-neutral-900 dark:text-neutral-100">
          {repoStats.stargazers_count}
        </div>
        <div class="text-xs text-neutral-600 dark:text-neutral-400">Stars</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-neutral-900 dark:text-neutral-100">
          {repoStats.forks_count}
        </div>
        <div class="text-xs text-neutral-600 dark:text-neutral-400">Forks</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-neutral-900 dark:text-neutral-100">
          {repoStats.watchers_count}
        </div>
        <div class="text-xs text-neutral-600 dark:text-neutral-400">Watchers</div>
      </div>
      <div class="text-center">
        <div class="text-2xl font-bold text-neutral-900 dark:text-neutral-100">
          {repoStats.open_issues_count}
        </div>
        <div class="text-xs text-neutral-600 dark:text-neutral-400">Issues</div>
      </div>
    </div>
    {repoStats.language && (
      <div class="mt-4 pt-4 border-t border-neutral-200 dark:border-neutral-700">
        <div class="flex items-center justify-between">
          <span class="text-sm text-neutral-600 dark:text-neutral-400">Primary Language</span>
          <span class="text-sm font-medium text-neutral-900 dark:text-neutral-100">
            {repoStats.language}
          </span>
        </div>
      </div>
    )}
  </div>
)} 